<!-- Navigation -->
<nav x-data="navigation" 
     @scroll.window.throttle.100ms="checkScroll()"
     :class="{ 'shadow-md': scrolled }"
     class="fixed top-0 w-full z-50 glass-nav border-b border-gray-100">
    <div class="max-w-7xl mx-auto px-6 py-4 flex justify-between items-center">
        <a href="{{ .Site.Home.RelPermalink }}" class="font-hand text-3xl font-bold tracking-tighter text-gray-800 hover:text-rose transition">L & G</a>
        
        <!-- Desktop Navigation -->
        <div class="hidden md:flex space-x-8 uppercase text-xs font-bold tracking-widest font-sans">
            <a href="{{ .Site.Home.RelPermalink }}" class="hover:text-rose transition">{{ i18n "nav_home" }}</a>
            <a href="{{ "traveling/" | relLangURL }}" class="hover:text-rose transition">{{ i18n "nav_traveling" }}</a>
        </div>
        
        <!-- Language Switcher -->
        <div class="flex items-center space-x-4">
            <div class="hidden sm:flex space-x-2 text-xs font-bold uppercase tracking-widest font-sans">
                {{ range $.Site.Languages }}
                {{- $translation := index (where $.AllTranslations "Lang" .Lang) 0 -}}
                {{- $url := cond (ne $translation nil) $translation.Permalink ($.Site.GetPage (printf "/%s" .Lang)).Permalink -}}
                <a href="{{ $url }}" 
                   onclick="event.preventDefault(); const code = new URLSearchParams(window.location.search).get('code'); window.location.href = this.href + (code ? '?code=' + code : ''); localStorage.setItem('lang-selected', 'true');"
                   class="{{ if eq $.Lang .Lang }}text-rose{{ else }}text-gray-400 hover:text-gray-800{{ end }} transition">
                    {{ .LanguageName }}
                </a>
                {{ if ne .Lang "ca" }}<span class="text-gray-300">|</span>{{ end }}
                {{ end }}
            </div>
            
            <!-- Mobile Menu Button -->
            <button @click="toggleMenu()" class="md:hidden text-gray-800 hover:text-rose transition">
                <i :class="menuOpen ? 'fa-xmark' : 'fa-bars'" class="fa-solid text-xl"></i>
            </button>
        </div>
    </div>
    
    <!-- Mobile Menu -->
    <div x-show="menuOpen"
         x-cloak
         x-transition:enter="transition ease-out duration-200"
         x-transition:enter-start="opacity-0 -translate-y-2"
         x-transition:enter-end="opacity-100 translate-y-0"
         x-transition:leave="transition ease-in duration-150"
         x-transition:leave-start="opacity-100 translate-y-0"
         x-transition:leave-end="opacity-0 -translate-y-2"
         class="md:hidden bg-white border-t border-gray-100 px-6 py-4">
        <div class="flex flex-col space-y-4 uppercase text-sm font-bold tracking-widest font-sans">
            <a @click="closeMenu()" href="{{ .Site.Home.RelPermalink }}" class="hover:text-rose transition">{{ i18n "nav_home" }}</a>
            <a @click="closeMenu()" href="{{ "traveling/" | relLangURL }}" class="hover:text-rose transition">{{ i18n "nav_traveling" }}</a>
            <div class="flex space-x-4 pt-2 border-t border-gray-100">
                {{ range $.Site.Languages }}
                {{- $translation := index (where $.AllTranslations "Lang" .Lang) 0 -}}
                {{- $url := cond (ne $translation nil) $translation.Permalink ($.Site.GetPage (printf "/%s" .Lang)).Permalink -}}
                <a href="{{ $url }}" 
                   onclick="event.preventDefault(); const code = new URLSearchParams(window.location.search).get('code'); window.location.href = this.href + (code ? '?code=' + code : ''); localStorage.setItem('lang-selected', 'true');"
                   class="{{ if eq $.Lang .Lang }}text-rose{{ else }}text-gray-400{{ end }} hover:text-rose transition">
                    {{ .LanguageName }}
                </a>
                {{ end }}
            </div>
        </div>
    </div>
</nav>
